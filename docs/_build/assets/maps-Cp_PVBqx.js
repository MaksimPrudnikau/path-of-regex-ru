import{$ as K,w as Q,x as me,y as ue,e as L,z as Le,A as De,s as Fe,u as de,B as Ce,C as Ie,a as N,b as f,h as B,t as $,l as g,p as O,D as le,F as S,G as he,q as X,S as ge,H as Pe,I as ve}from "docs/_build/assets/web-yCR0qigV.js";import{l as qe}from "docs/_build/assets/index-E35jO1Cu.js";const fe=Symbol("store-raw"),H=Symbol("store-node"),D=Symbol("store-has"),Ae=Symbol("store-self");function ke(e){let t=e[K];if(!t&&(Object.defineProperty(e,K,{value:t=new Proxy(e,Ue)}),!Array.isArray(e))){const r=Object.keys(e),n=Object.getOwnPropertyDescriptors(e);for(let l=0,i=r.length; l<i; l++){const o=r[l];n[o].get&&Object.defineProperty(e,o,{enumerable:n[o].enumerable,get:n[o].get.bind(t)})}}return t}function z(e){let t;return e!=null&&typeof e=="object"&&(e[K]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function F(e, t=new Set){let r,n,l,i;if(r=e!=null&&e[fe])return r;if(!z(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let o=0,c=e.length; o<c; o++)l=e[o],(n=F(l,t))!==l&&(e[o]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const o=Object.keys(e),c=Object.getOwnPropertyDescriptors(e);for(let s=0,u=o.length; s<u; s++)i=o[s],!c[i].get&&(l=e[i],(n=F(l,t))!==l&&(e[i]=n))}return e}function ie(e, t){let r=e[t];return r||Object.defineProperty(e,t,{value:r=Object.create(null)}),r}function te(e, t, r){if(e[t])return e[t];const[n,l]=L(r,{equals:!1,internal:!0});return n.$=l,e[t]=n}function ze(e, t){const r=Reflect.getOwnPropertyDescriptor(e,t);return!r||r.get||!r.configurable||t===K||t===H||(delete r.value,delete r.writable,r.get=()=>e[K][t]),r}function Re(e){ue()&&te(ie(e,H),Ae)()}function Be(e){return Re(e),Reflect.ownKeys(e)}const Ue={get(e, t, r){if(t===fe)return e;if(t===K)return r;if(t===me)return Re(e),r;const n=ie(e,H),l=n[t];let i=l?l():e[t];if(t===H||t===D||t==="__proto__")return i;if(!l){const o=Object.getOwnPropertyDescriptor(e,t);ue()&&(typeof i!="function"||e.hasOwnProperty(t))&&!(o&&o.get)&&(i=te(n,t,i)())}return z(i)?ke(i):i},has(e, t){return t===fe||t===K||t===me||t===H||t===D||t==="__proto__"?!0:(ue()&&te(ie(e,D),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Be,getOwnPropertyDescriptor:ze};function T(e, t, r, n=!1){if(!n&&e[t]===r)return;const l=e[t],i=e.length;r===void 0?(delete e[t],e[D]&&e[D][t]&&l!==void 0&&e[D][t].$()):(e[t]=r,e[D]&&e[D][t]&&l===void 0&&e[D][t].$());let o=ie(e,H),c;if((c=te(o,t,l))&&c.$(()=>r),Array.isArray(e)&&e.length!==i){for(let s=e.length; s<i; s++)(c=o[s])&&c.$();(c=te(o,"length",i))&&c.$(e.length)}(c=o[Ae])&&c.$()}function Oe(e, t){const r=Object.keys(t);for(let n=0; n<r.length; n+=1){const l=r[n];T(e,l,t[l])}}function Ke(e, t){if(typeof t=="function"&&(t=t(e)),t=F(t),Array.isArray(t)){if(e===t)return;let r=0,n=t.length;for(; r<n; r++){const l=t[r];e[r]!==l&&T(e,r,l)}T(e,"length",n)}else Oe(e,t)}function Y(e, t, r=[]){let n,l=e;if(t.length>1){n=t.shift();const o=typeof n,c=Array.isArray(e);if(Array.isArray(n)){for(let s=0; s<n.length; s++)Y(e,[n[s]].concat(t),r);return}else if(c&&o==="function"){for(let s=0; s<e.length; s++)n(e[s],s)&&Y(e,[s].concat(t),r);return}else if(c&&o==="object"){const{from:s=0,to:u=e.length-1,by:a=1}=n;for(let d=s; d<=u; d+=a)Y(e,[d].concat(t),r);return}else if(t.length>1){Y(e[n],t,[n].concat(r));return}l=e[n],r=[n].concat(r)}let i=t[0];typeof i=="function"&&(i=i(l,r),i===l)||n===void 0&&i==null||(i=F(i),n===void 0||z(l)&&z(i)&&!Array.isArray(i)?Oe(l,i):T(e,n,i))}function $e(...[e,t]){const r=F(e||{}),n=Array.isArray(r),l=ke(r);function i(...o){Q(()=>{n&&o.length===1?Ke(r,o[0]):Y(r,o)})}return[l,i]}const pe=Symbol("store-root");function J(e, t, r, n, l){const i=t[r];if(e===i)return;const o=Array.isArray(e);if(r!==pe&&(!z(e)||!z(i)||o!==Array.isArray(i)||l&&e[l]!==i[l])){T(t,r,e);return}if(o){if(e.length&&i.length&&(!n||l&&e[0]&&e[0][l]!=null)){let u,a,d,b,M,E,U,p;for(d=0,b=Math.min(i.length,e.length); d<b&&(i[d]===e[d]||l&&i[d]&&e[d]&&i[d][l]&&i[d][l]===e[d][l]); d++)J(e[d],i,d,n,l);const h=new Array(e.length),m=new Map;for(b=i.length-1,M=e.length-1; b>=d&&M>=d&&(i[b]===e[M]||l&&i[b]&&e[M]&&i[b][l]&&i[b][l]===e[M][l]); b--,M--)h[M]=i[b];if(d>M||d>b){for(a=d; a<=M; a++)T(i,a,e[a]);for(; a<e.length; a++)T(i,a,h[a]),J(e[a],i,a,n,l);i.length>e.length&&T(i,"length",e.length);return}for(U=new Array(M+1),a=M; a>=d; a--)E=e[a],p=l&&E?E[l]:E,u=m.get(p),U[a]=u===void 0?-1:u,m.set(p,a);for(u=d; u<=b; u++)E=i[u],p=l&&E?E[l]:E,a=m.get(p),a!==void 0&&a!==-1&&(h[a]=i[u],a=U[a],m.set(p,a));for(a=d; a<e.length; a++)a in h?(T(i,a,h[a]),J(e[a],i,a,n,l)):T(i,a,e[a])}else for(let u=0,a=e.length; u<a; u++)J(e[u],i,u,n,l);i.length>e.length&&T(i,"length",e.length);return}const c=Object.keys(e);for(let u=0,a=c.length; u<a; u++)J(e[c[u]],i,c[u],n,l);const s=Object.keys(i);for(let u=0,a=s.length; u<a; u++)e[s[u]]===void 0&&T(i,s[u],void 0)}function oe(e, t={}){const{merge:r,key:n="id"}=t,l=F(e);return i=>{if(!z(i)||!z(l))return l;const o=J(l,{[pe]:i},pe,r,n);return o===void 0?i:o}}function Ze(e, t={}){let r,n=()=>!r||r.state==="unresolved"?void 0:F(r.latest);[r]=Le(()=>Ve(e,De(()=>de(n),()=>{})), i=>i,{...t,storage: i=>Je(i,t.reconcile)});const l=()=>r();return Object.defineProperty(l,"latest",{get(){return r.latest}}),l}function Je(e, t){const[r,n]=$e({value:structuredClone(e)});return[()=>r.value, l=>(typeof l=="function"&&(l=l()),n("value",oe(structuredClone(l),t)),r.value)]}class j{static all(){return new j}static allSettled(){return new j}static any(){return new j}static race(){return new j}static reject(){return new j}static resolve(){return new j}catch(){return new j}then(){return new j}finally(){return new j}}function Ve(e, t){if(!Fe.context)return e(t);const r=fetch,n=Promise;try{return window.fetch=()=>new j,Promise=j,e(t)}finally{window.fetch=r,Promise=n}}var W=(e=>(e[e.Include=0]="Include",e[e.Exclude=1]="Exclude",e))(W||{}),V=(e=>(e[e.Any=0]="Any",e[e.None=1]="None",e))(V||{});const ne=()=>({includeCorruptedMaps:!1,includeCorruptedMapsType:0,includeMagicMaps:!1,includeMapsType:0,includeNormalMaps:!1,includeRareMaps:!1,includeT17:!1,includeUnidentifiedMaps:!1,includeUnidentifiedMapsType:0,level:{},moreCurrency:{},moreMaps:{},moreScarab:{},negativeMods:[],packSize:{},positiveMods:[],positiveModsType:0,quality:{},quantity:{},rarity:{}}),A=Ce({});function we(e, t={}){const r=t.storage||globalThis.localStorage,n=t.name||`storage-${Ie()}`;if(!r)return[e[0],e[1],null];const l=t.storageOptions,i=t.serialize||JSON.stringify.bind(JSON),o=t.deserialize||JSON.parse.bind(JSON),c=r.getItem(n,l),s=typeof e[0]=="function"? a=>{try{const d=o(a);e[1](()=>d)}catch{}}: a=>{try{const d=o(a);e[1](oe(d))}catch{}};let u=!0;if(c instanceof Promise?c.then(a=>u&&a&&s(a)):c&&s(c),typeof t.sync?.[0]=="function"){const a=typeof e[0]=="function"?e[0]:()=>e[0];t.sync[0](d=>{d.key!==n||(d.url||globalThis.location.href)!==globalThis.location.href||d.newValue===i(de(a))||s(d.newValue)})}return[e[0],typeof e[0]=="function"? a=>{const d=e[1](a),b=a!=null?i(d):a;return t.sync?.[1](n,b),b!=null?r.setItem(n,b,l):r.removeItem(n,l),u=!1,d}:(...a)=>{e[1](...a);const d=i(de(()=>e[0]));t.sync?.[1](n,d),r.setItem(n,d,l),u=!1},c]}const ye="path-of-regex-maps-profiles";function He(e){const[t,r]=we($e({default:ne()}),{name:ye}),[n,l]=we(L("default"),{name:`${ye}:current`}),i=N(()=>t?.[n()]??ne()),o= c=>{r(n(),c)};return f(A.Provider,{value:{addProfile:(c, s)=>{if(c in t){alert(`Профиль с именем "${c}" уже существует`);return}if(s&&!(s in t)){alert(`Профиль с именем "${s}" не найден`);return}const u=F(t),a=s?u[s]:ne();Q(()=>{r(c,JSON.parse(JSON.stringify(a))),l(c)})},currentProfile:i,currentProfileName:n,editProfile: c=>{if(c in t){alert(`Профиль с именем "${c}" уже существует`);return}const s=F(t),u=t[n()],{[n()]:a,...d}=s;d[c]=u,Q(()=>{r(oe(d)),l(c)})},profiles:t,removeProfile:()=>{if(Object.keys(t).length<2){alert("Нельзя удалить единственный профиль");return}const{[n()]:s,...u}=t,a=Object.keys(u)[0];Q(()=>{r(oe(u)),l(a)})},setCurrentProfile:l,updateProfile:o},get children(){return e.children}})}var We=$('<button class="btn text-start p-2 text-wrap justify-start h-fit"type=button>');function Ge({mod:e,onClick:t,isSelected:r}){const n=()=>{t()};return(()=>{var l=We();return l.$$click=n,g(l,()=>e.name),O(i=>le(l,{"text-white":e.rank===0&&!r(),"text-black":e.rank<700&&r(),"text-red-200":e.rank>0&&e.rank<=50&&!r(),"text-red-300":e.rank>50&&e.rank<=150&&!r(),"text-red-400":e.rank>150&&e.rank<700&&!r(),"bg-white":e.rank===0&&r(),"bg-red-200 text-black":e.rank>0&&e.rank<=50&&r(),"bg-red-300 text-black":e.rank>50&&e.rank<=150&&r(),"bg-red-400 text-black":e.rank>150&&e.rank<700&&r(),"text-accent":e.rank>=700&&!r(),"btn-accent":e.rank>=700&&r()},i)),l})()}B(["click"]);var Ye=$('<div class="col gap-2 w-full">');function Qe({mods:e,model:t}){const{currentProfile:r,updateProfile:n}=S(A),l=N(()=>r()[t]),i= o=>{n(c=>{const s=c[t],u=s.findIndex(d=>d.id===o.id),a=u>-1?s.toSpliced(u,1):[...s,{id:o.id,regex:o.regex}];return{...c,[t]:a}})};return(()=>{var o=Ye();return g(o,f(he,{get each(){return e()},children: c=>{const s=N(()=>(l()??[]).map(u=>u.id).includes(c.id));return f(Ge,{isSelected:s,mod:c,onClick:()=>i(c)})}})),o})()}var Xe=$('<div class="col gap-2 items-start h-24 w-full"><h2></h2><div class="flex flex-1">');function et(e){return(()=>{var t=Xe(),r=t.firstChild,n=r.nextSibling;return g(r,()=>e.title),g(n,()=>e.children),t})()}var tt=$('<label class="input w-full"><input id=search-mod-input placeholder=Модификатор required type=search>');function rt(e){return(()=>{var t=tt(),r=t.firstChild;return r.$$input= n=>{e.setValue(n.target.value)},O(()=>r.value=e.value()),t})()}B(["input"]);var nt=$('<div class="col gap-3 items-start w-full min-w-52.5">');function Ee(e){const[t,r]=L(""),n=N(()=>{const l=lt(t());return e.mods().filter(l)});return(()=>{var l=nt();return g(l,f(et,{get title(){return e.title},get children(){return e.children}}),null),g(l,f(rt,{setValue:r,value:t}),null),g(l,f(Qe,{get model(){return e.model},mods:n}),null),l})()}function lt(e){return t=>e.length<1?!0:t.name.toLowerCase().includes(e)}var it=$('<span class="font-bold uppercase text-red-500/80">исключить '),ot=$("<span>эти модификаторы");function st({mods:e}){const t=N(()=>e().toSorted((r, n)=>n.rank-r.rank));return f(Ee,{model:"negativeMods",mods:t,get title(){return[it(),ot()]}})}var at=$('<div class="row gap-3 center"><div class="row gap-3"><input class="radio radio-primary rounded-md"type=radio><span>Любой</span></div><div class="row gap-3"><input class="radio radio-primary rounded-md"type=radio><span>Все'),ct=$('<span class="font-bold uppercase text-primary">Включить '),ut=$("<span>эти модификаторы");function dt({mods:e}){const{currentProfile:t,updateProfile:r}=S(A),n=N(()=>e().toSorted((i, o)=>i.rank-o.rank)),l=()=>t().positiveModsType;return f(Ee,{model:"positiveMods",mods:n,get title(){return[ct(),ut()]},get children(){var i=at(),o=i.firstChild,c=o.firstChild,s=o.nextSibling,u=s.firstChild;return c.addEventListener("change",()=>{r(a=>({...a,positiveModsType:V.Any}))}),u.addEventListener("change",()=>{r(a=>({...a,positiveModsType:V.None}))}),O(()=>c.checked=l()===V.Any),O(()=>u.checked=l()===V.None),i}})}var ft=$('<div class="w-full grid grid-cols-2 grid-rows-1 gap-20">');function pt({mods:e}){const{currentProfile:t}=S(A),r=N(()=>e().filter(n=>t().includeT17?!0:n.rank<700));return(()=>{var n=ft();return g(n,f(st,{mods:r}),null),g(n,f(dt,{mods:r}),null),n})()}var ht=$('<select class="select min-w-36">'),gt=$("<option>");function vt(){const{profiles:e,currentProfileName:t,setCurrentProfile:r}=S(A),n=N(()=>{const l=e;return!l||typeof l!="object"?[]:Object.keys(l)});return(()=>{var l=ht();return l.addEventListener("change", i=>{console.log(i.target.value),r(i.target.value)}),g(l,f(he,{get each(){return n()},children: i=>(()=>{var o=gt();return o.value=i,g(o,i),o})()})),O(()=>l.value=t()),l})()}var $t=$('<div class="dropdown dropdown-end"><button class="btn btn-ghost p-1 w-fit h-fit"tabindex=0 type=button><img class="min-w-5 min-h-5"height=20></button><ul class="dropdown-content menu bg-base-300 rounded-box z-1 w-52 p-2 shadow-sm border-primary"tabindex=-1>');function Ne(e){return(()=>{var t=$t(),r=t.firstChild,n=r.firstChild,l=r.nextSibling;return r.$$click=()=>e.setOpened(!0),g(l,()=>e.children),O(i=>{var o=!e.opened(),c=e.alt,s=e.src;return o!==i.e&&t.classList.toggle("dropdown-close",i.e=o),c!==i.t&&X(n,"alt",i.t=c),s!==i.a&&X(n,"src",i.a=s),i},{e:void 0,t:void 0,a:void 0}),t})()}B(["click"]);var bt=$('<div class="col gap-2"><span class=text-sm>или дублировать из:</span><select class="select appearance-none select-sm"name=duplicateFrom><option disabled selected>Выберирите профиль'),mt=$("<option>");function wt(e){const{profiles:t}=S(A),r=N(()=>{const n=t;return!n||typeof n!="object"?[]:Object.keys(n)});return(()=>{var n=bt(),l=n.firstChild,i=l.nextSibling;return i.firstChild,i.addEventListener("change", o=>{e.setDuplicateFrom(o.target.value)}),g(i,f(he,{get each(){return r()},children: o=>(()=>{var c=mt();return g(c,o),c})()}),null),n})()}var yt=$('<p class="text-red-500/80 text-xs mt-1">'),xt=$('<div><input autocomplete=name class="input input-sm"name=name placeholder="Название профиля">');function je(e){return(()=>{var t=xt(),r=t.firstChild;return r.$$input= n=>{Q(()=>{e.setError(""),e.setName(n.target.value)})},g(t,f(ge,{get when(){return!!e.error()},get children(){var n=yt();return g(n,()=>e.error()),n}}),null),O(()=>r.classList.toggle("border-red-500/80",!!e.error())),O(()=>r.value=e.name()),t})()}B(["input"]);var _t=$('<form class="col gap-3"><h4>Создать новый профиль:</h4><button class="btn btn-primary btn-sm"type=submit>Создать');function Mt(e){const[t,r]=L(""),[n,l]=L(),[i,o]=L(""),c=()=>{t()||o("Введите название профиля"),e.onSubmit(t(),n()),r(""),l("")};let s;return(()=>{var u=_t(),a=u.firstChild,d=a.nextSibling,b=s;return typeof b=="function"?Pe(b,u):s=u,u.addEventListener("submit", M=>{M.preventDefault(),c(),s.reset()}),g(u,f(je,{error:i,name:t,setError:o,setName:r}),d),g(u,f(wt,{setDuplicateFrom:l}),d),u})()}function St(){const[e,t]=L(!1),{addProfile:r}=S(A),n=(l, i)=>{t(!1),r(l,i)};return f(Ne,{alt:"add",opened:e,setOpened:t,src:"/svg/plus.svg",get children(){return f(Mt,{onSubmit:n})}})}var Ct=$('<form class="col gap-3"><h4>Редактировать профиль:</h4><button class="btn btn-primary btn-sm"type=submit>Сохранить');function Pt(e){const{currentProfile:t,currentProfileName:r}=S(A),[n,l]=L(r()),[i,o]=L("");ve(()=>{t(),l(r())});const c=()=>{n()||o("Введите название профиля"),e.onSubmit(n())};return(()=>{var s=Ct(),u=s.firstChild,a=u.nextSibling;return s.addEventListener("submit", d=>{d.preventDefault(),c()}),g(s,f(je,{error:i,name:n,setError:o,setName:l}),a),s})()}function At(){const[e,t]=L(!1),{editProfile:r}=S(A),n= l=>{t(!1),r(l)};return f(Ne,{alt:"edit",opened:e,setOpened:t,src:"/svg/edit.svg",get children(){return f(Pt,{onSubmit:n})}})}var kt=$('<button class="btn btn-ghost p-1 w-fit h-fit text-base-content"type=button><img alt=remove class="min-w-5 min-h-5"height=20 src=/docs/svg/remove.svg>'),Rt=$('<dialog class=modal id=my_modal_1><div class=modal-box><h3 class="text-lg font-bold">Вы уверены?</h3><p class=py-4>Это действие нельзя отменить</p><div class="modal-action m-0"><form method=dialog><button class="btn btn-secondary"type=submit>Удалить');function Ot(){const{profiles:e,removeProfile:t}=S(A);let r;const n=()=>Object.keys(e).length<=1,l=()=>{r.showModal()},i=()=>{n()||(t(),r.close())};return[(()=>{var o=kt();return o.$$click=l,O(c=>{var s={"opacity-10 cursor-not-allowed":n()},u=n();return c.e=le(o,s,c.e),u!==c.t&&(o.disabled=c.t=u),c},{e:void 0,t:void 0}),o})(),(()=>{var o=Rt(),c=o.firstChild,s=c.firstChild,u=s.nextSibling,a=u.nextSibling,d=a.firstChild,b=r;return typeof b=="function"?Pe(b,o):r=o,d.addEventListener("submit", M=>{M.preventDefault(),i()}),o})()]}B(["click"]);var Et=$("<div class=row>");function Nt(){return(()=>{var e=Et();return g(e,f(At,{}),null),g(e,f(St,{}),null),g(e,f(Ot,{}),null),e})()}var jt=$('<div class="row gap-4 items-center"><span>Профиль');function Tt(){return(()=>{var e=jt();return e.firstChild,g(e,f(vt,{}),null),g(e,f(Nt,{}),null),e})()}var Lt=$('<div class="w-full row justify-between"><h2>Регулярное выражение для поиска карт:');function Dt(){return(()=>{var e=Lt();return e.firstChild,g(e,f(Tt,{}),null),e})()}function Ft(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */var ae,xe;function It(){return xe||(xe=1,ae=function(e){return typeof e=="number"?e-e===0:typeof e=="string"&&e.trim()!==""?Number.isFinite?Number.isFinite(+e):isFinite(+e):!1}),ae}/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */var ce,_e;function qt(){if(_e)return ce;_e=1;const e=It(),t=(p,h,m)=>{if(e(p)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(h===void 0||p===h)return String(p);if(e(h)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let v={relaxZeros:!0,...m};typeof v.strictZeros=="boolean"&&(v.relaxZeros=v.strictZeros===!1);let y=String(v.relaxZeros),x=String(v.shorthand),C=String(v.capture),w=String(v.wrap),k=p+":"+h+"="+y+x+C+w;if(t.cache.hasOwnProperty(k))return t.cache[k].result;let R=Math.min(p,h),P=Math.max(p,h);if(Math.abs(R-P)===1){let G=p+"|"+h;return v.capture?`(${G})`:v.wrap===!1?G:`(?:${G})`}let I=E(p)||E(h),_={min:p,max:h,a:R,b:P},Z=[],re=[];if(I&&(_.isPadded=I,_.maxLen=String(_.max).length),R<0){let G=P<0?Math.abs(P):1;re=i(G,Math.abs(R),_,v),R=_.a=0}return P>=0&&(Z=i(R,P,_,v)),_.negatives=re,_.positives=Z,_.result=r(re,Z),v.capture===!0?_.result=`(${_.result})`:v.wrap!==!1&&Z.length+re.length>1&&(_.result=`(?:${_.result})`),t.cache[k]=_,_.result};function r(p,h,m){let v=o(p,h,"-",!1)||[],y=o(h,p,"",!1)||[],x=o(p,h,"-?",!0)||[];return v.concat(x).concat(y).join("|")}function n(p,h){let m=1,v=1,y=a(p,m),x=new Set([h]);for(;p<=y&&y<=h;)x.add(y),m+=1,y=a(p,m);for(y=d(h+1,v)-1;p<y&&y<=h;)x.add(y),v+=1,y=d(h+1,v)-1;return x=[...x],x.sort(s),x}function l(p,h,m){if(p===h)return{pattern:p,count:[],digits:0};let v=c(p,h),y=v.length,x="",C=0;for(let w=0;w<y;w++){let[k,R]=v[w];k===R?x+=k:k!=="0"||R!=="9"?x+=M(k,R):C++}return C&&(x+=m.shorthand===!0?"\\d":"[0-9]"),{pattern:x,count:[C],digits:y}}function i(p,h,m,v){let y=n(p,h),x=[],C=p,w;for(let k=0;k<y.length;k++){let R=y[k],P=l(String(C),String(R),v),I="";if(!m.isPadded&&w&&w.pattern===P.pattern){w.count.length>1&&w.count.pop(),w.count.push(P.count[0]),w.string=w.pattern+b(w.count),C=R+1;continue}m.isPadded&&(I=U(R,m,v)),P.string=I+P.pattern+b(P.count),x.push(P),C=R+1,w=P}return x}function o(p,h,m,v,y){let x=[];for(let C of p){let{string:w}=C;!v&&!u(h,"string",w)&&x.push(m+w),v&&u(h,"string",w)&&x.push(m+w)}return x}function c(p,h){let m=[];for(let v=0;v<p.length;v++)m.push([p[v],h[v]]);return m}function s(p,h){return p>h?1:h>p?-1:0}function u(p,h,m){return p.some(v=>v[h]===m)}function a(p,h){return Number(String(p).slice(0,-h)+"9".repeat(h))}function d(p,h){return p-p%Math.pow(10,h)}function b(p){let[h=0,m=""]=p;return m||h>1?`{${h+(m?","+m:"")}}`:""}function M(p,h,m){return`[${p}${h-p===1?"":"-"}${h}]`}function E(p){return/^-?(0+)\d/.test(p)}function U(p,h,m){if(!h.isPadded)return p;let v=Math.abs(h.maxLen-String(p).length),y=m.relaxZeros!==!1;switch(v){case 0:return"";case 1:return y?"0?":"0";case 2:return y?"0{0,2}":"00";default:return y?`0{0,${v}}`:`0{${v}}`}}return t.cache={},t.clearCache=()=>t.cache={},ce=t,ce}var zt=qt();const Bt=Ft(zt);function Ut(e,t){let{min:r,max:n}=e;r??=1,n??=999;const{effectiveMin:l,effectiveMax:i}=Kt(r,n,t);return`(${Bt(l,i,{capture:!0,shorthand:!0}).replaceAll("(","").replaceAll(")","")})`}function Kt(e,t,r){const n=r?.minAllowed,l=r?.maxAllowed;if(e<1)throw new Error("Минимальное значение не может быть меньше 1");if(n&&e<n)throw new Error(`Максимальное значение ${e} превышает максимально допустимое ${n}`);if(t<e)throw new Error("Максимальное значение не может быть меньше минимального");const i=l?Math.min(t,l):t;if(l&&e>l)throw new Error(`Минимальное значение ${e} превышает максимально допустимое ${l}`);return{effectiveMax:i,effectiveMin:n??e}}const Zt=e=>{const{positiveMods:t,negativeMods:r,level:n,quality:l,quantity:i,packSize:o,rarity:c,moreCurrency:s,moreMaps:u,moreScarab:a,includeNormalMaps:d,includeMagicMaps:b,includeRareMaps:M,includeMapsType:E,includeUnidentifiedMaps:U,includeUnidentifiedMapsType:p,includeCorruptedMaps:h,includeCorruptedMapsType:m,positiveModsType:v}=e,y=t.map(_=>_.regex).join(v===V.Any?"|":'" "'),x=r.map(_=>_.regex).join("|"),C=[];r.length>0&&C.push(`!${x}`),t.length>0&&C.push(y);const w=Vt(C);w(n,"рты: {0}$",{maxAllowed:17}),w(l,"во: {0}$",{maxAllowed:20}),w(i,"^Кол.+: \\+{0}%"),w(c,"^Ред.+: \\+{0}%"),w(o,"ров: \\+{0}%"),w(s,"юты: \\+{0}%"),w(u,"арт: \\+{0}%"),w(a,"еев: \\+{0}%");const k=[[d,"о"],[b,"в"],[M,"р"]].filter(_=>_[0]).map(([_,Z])=>Z),R=k.length>0&&k.length<3,P=Ht(C),I=k.join("|");return P(R,E,`ть: ${k.length>1?`(${I})`:`${I}`}`),P(U,p,"неоп"),P(h,m,"оскв"),C.map(_=>`"${_}"`).join(" ")};function Jt(e){return!!e.min||!!e.max}function Vt(e){return(t,r,n)=>{if(!Jt(t))return;const l=Ut(t,{maxAllowed:n?.maxAllowed,minAllowed:n?.minAllowed});e.push(Wt(r,l))}}function Ht(e){return(t,r,n)=>{t&&e.push(r===W.Exclude?`!${n}`:n)}}function Wt(e,...t){return e.replace(/{(\d+)}/g,(r,n)=>t[n]||"")}const se=Ce({});function Gt(e){const{currentProfile:t}=S(A),[r,n]=L(),[l,i]=$e({autoCopy:!1,copied:!1}),[o,c]=L(""),s=N(()=>{l.autoCopy||i("copied",!1);try{const u=Zt(t());return c(u),n(),u}catch(u){return u instanceof Error&&n(u.message),o()}});return ve(async()=>{l.autoCopy&&(await navigator.clipboard.writeText(s()),i("copied",!0))}),f(se.Provider,{value:{autoCopy:()=>l.autoCopy,copied:()=>l.copied,errorMessage:r,regex:s,updateStore:i},get children(){return e.children}})}var Yt=$('<button class="btn btn-primary"type=button>Скопировать');function Qt(){const e=S(se),t=async()=>{await navigator.clipboard.writeText(e.regex()),e.updateStore("copied",!0)};return(()=>{var r=Yt();return r.$$click=t,O(()=>r.disabled=!!e.errorMessage()),r})()}B(["click"]);var Xt=$('<button class="btn btn-secondary"type=button>Сбросить');function er(){const{updateProfile:e}=S(A),{updateStore:t}=S(se),r=()=>{e(()=>ne()),t("copied",!1),tr()};return(()=>{var n=Xt();return n.$$click=r,n})()}function tr(){document.querySelectorAll("#search-mod-input").forEach(e=>{e.value="";const t=new Event("input",{bubbles:!0,cancelable:!0});e.dispatchEvent(t)})}B(["click"]);var rr=$('<div class="row gap-3">');function nr(){return(()=>{var e=rr();return g(e,f(Qt,{}),null),g(e,f(er,{}),null),e})()}var lr=$('<span class="italic text-red-500">'),ir=$('<div class="col gap-2"><h2 class="w-full overflow-x-auto wrap-break-word min-h-24"></h2><div>Длина: <!> / 250');function or(){const{errorMessage:e,regex:t,copied:r}=S(se);return(()=>{var n=ir(),l=n.firstChild,i=l.nextSibling,o=i.firstChild,c=o.nextSibling;return c.nextSibling,g(l,t),g(i,()=>t().length,c),g(n,f(ge,{get when(){return!!e()},get children(){var s=lr();return g(s,e),s}}),null),O(s=>{var u=!!(!e()&&r()),a=!!e();return u!==s.e&&l.classList.toggle("text-primary",s.e=u),a!==s.t&&l.classList.toggle("text-red-500",s.t=a),s},{e:void 0,t:void 0}),n})()}var sr=$('<div class="p- col gap-3 bg-base-200 w-full p-5 rounded-2xl">');function ar(){return f(Gt,{get children(){var e=sr();return g(e,f(or,{}),null),g(e,f(nr,{}),null),e}})}var cr=$('<div class="col gap-10 bg-base-300/50 px-8 py-4 rounded-2xl"><h2 class="text-lg font-semibold text-gray-300 italic"></h2><div class="col gap-3">');function be(e){return(()=>{var t=cr(),r=t.firstChild,n=r.nextSibling;return g(r,()=>e.title),g(n,()=>e.children),t})()}var ur=$('<input class="input w-16 h-8 rounded-sm"type=number>');function Me({value:e,children:t,updateStore:r,min:n,max:l}){const i=c=>{const s=c.target.value;r(s?+s:void 0)},o=N(()=>!e()||!n?!1:e()<(n??0)?!0:l?l<(n??0)?!0:l>999:!1);return(()=>{var c=ur();return c.$$input=i,X(c,"max",l),X(c,"min",n??0),O(s=>{var u=!!o(),a=!!(!o()&&e()),d=t?.toString();return u!==s.e&&c.classList.toggle("border-red-500",s.e=u),a!==s.t&&c.classList.toggle("input-primary",s.t=a),d!==s.a&&X(c,"placeholder",s.a=d),s},{e:void 0,t:void 0,a:void 0}),O(()=>c.value=e()??""),c})()}B(["input"]);var dr=$('<div class="row w-full"><span class=min-w-52></span><div class="row gap-2">');function q({model:e,children:t,min:r=0,max:n}){const{profiles:l,currentProfileName:i,updateProfile:o}=S(A),c=(a,d)=>{o(b=>({...b,[e]:{...b[e],[d]:a}}))},s=N(()=>l[i()][e].min),u=N(()=>l[i()][e].max);return(()=>{var a=dr(),d=a.firstChild,b=d.nextSibling;return g(d,t),g(b,f(Me,{get max(){return u()},min:r,updateStore:M=>c(M,"min"),value:s,children:"мин"}),null),g(b,f(Me,{max:n,get min(){return s()},updateStore:M=>c(M,"max"),value:u,children:"макс"}),null),a})()}function fr(){return f(be,{title:"Разное",get children(){return[f(q,{model:"moreCurrency",children:"Больше валюты"}),f(q,{model:"moreMaps",children:"Больше карт"}),f(q,{model:"moreScarab",children:"Больше скарабеев"})]}})}function pr(){return f(be,{title:"Основные параметры карты",get children(){return[f(q,{max:17,min:1,model:"level",children:"Уровень карты"}),f(q,{model:"quality",children:"Качество карты"})]}})}function hr(){return f(be,{title:"Монстры и плотность",get children(){return[f(q,{model:"quantity",children:"Количество предметов"}),f(q,{model:"rarity",children:"Редкость предметов"}),f(q,{model:"packSize",children:"Размер групп монстров"})]}})}function gr(){return[f(pr,{}),f(hr,{}),f(fr,{})]}var vr=$('<div class="row gap-2"><input class="checkbox rounded-md"type=checkbox><span>');function ee({model:e,children:t,color:r="checkbox-primary",textColor:n=""}){const{currentProfile:l,updateProfile:i}=S(A),o=c=>{i(s=>({...s,[e]:c.target.checked}))};return(()=>{var c=vr(),s=c.firstChild,u=s.nextSibling;return s.addEventListener("change",o),g(u,t),O(a=>{var d={[r]:l()[e]},b={[n]:!0};return a.e=le(s,d,a.e),a.t=le(u,b,a.t),a},{e:void 0,t:void 0}),O(()=>s.checked=l()[e]),c})()}var $r=$('<div class="row gap-2"><input class="checkbox rounded-md"type=checkbox><span class=text-secondary>Исключить');function br({model:e}){const{currentProfile:t,updateProfile:r}=S(A),n=i=>{r(o=>({...o,[e]:i}))},l=()=>t()[e]===W.Exclude;return(()=>{var i=$r(),o=i.firstChild;return o.addEventListener("change",()=>n(l()?W.Include:W.Exclude)),O(()=>o.classList.toggle("checkbox-secondary",!!l())),O(()=>o.checked=l()),i})()}var mr=$('<div class="row gap-5">');function Te({isChecked:e,children:t,model:r}){const{updateProfile:n}=S(A);return ve(()=>{e()||n(l=>({...l,[r]:W.Include}))}),(()=>{var l=mr();return g(l,t,null),g(l,f(ge,{get when(){return e()},get children(){return f(br,{model:r})}}),null),l})()}function Se({model:e,typeModel:t,children:r,color:n,textColor:l}){const{currentProfile:i}=S(A);return f(Te,{isChecked:()=>i()[e],model:t,get children(){return f(ee,{color:n,model:e,textColor:l,children:r})}})}function wr(){const{currentProfile:e}=S(A);return f(Te,{isChecked:()=>e().includeNormalMaps||e().includeMagicMaps||e().includeRareMaps||!1,model:"includeMapsType",get children(){return[f(ee,{color:"bg-white text-black",model:"includeNormalMaps",children:"Обычные карты"}),f(ee,{color:"bg-blue-600 text-white",model:"includeMagicMaps",textColor:"text-blue-400",children:"Магические карты"}),f(ee,{color:"checkbox-warning",model:"includeRareMaps",textColor:"text-warning",children:"Редкие карты"})]}})}var yr=$('<div class="col gap-3 bg-base-300/50 py-8 px-6 rounded-2xl w-fit">');function xr(){return(()=>{var e=yr();return g(e,f(wr,{}),null),g(e,f(Se,{color:"checkbox-neutral",model:"includeUnidentifiedMaps",typeModel:"includeUnidentifiedMapsType",children:"Неопознанные карты"}),null),g(e,f(Se,{color:"bg-red-500/50",model:"includeCorruptedMaps",textColor:"text-red-500/80",typeModel:"includeCorruptedMapsType",children:"Оскверненные карты"}),null),g(e,f(ee,{color:"checkbox-accent",model:"includeT17",textColor:"text-accent",children:"Показать модификаторы Т17 карт"}),null),e})()}var _r=$('<div class="flex row flex-wrap gap-x-6 gap-y-4">');function Mr(){return(()=>{var e=_r();return g(e,f(gr,{}),null),g(e,f(xr,{}),null),e})()}var Sr=$('<main class="w-full p-4 space-y-4">');function Ar(){const e=Ze(async()=>qe()),t=()=>e()??[];return f(He,{get children(){var r=Sr();return g(r,f(Dt,{}),null),g(r,f(ar,{}),null),g(r,f(Mr,{}),null),g(r,f(pt,{mods:t}),null),r}})}export{Ar as default};
